{
  "workflows": {
    "workflows/pmdbs_spatial_geomx/cohort_analysis/cohort_analysis.wdl": {
      "key": "workflows/pmdbs_spatial_geomx/cohort_analysis/cohort_analysis.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "merge_and_prep": {
          "key": "merge_and_prep",
          "digest": "z6qqmruro2r42bxwxxsbig34t5qfjhir",
          "tests": [
            {
              "inputs": {
                "cohort_id": "${geomx_team_id}",
                "processed_adata_objects": [
                  "${geomx_input_file_path}/${process_to_adata_workflow_name}/${geomx_slide_id}.processed.h5ad",
                  "${geomx_input_file_path}/${process_to_adata_workflow_name}/${geomx_slide_id_2}.processed.h5ad"
                ],
                "n_top_genes": 3000,
                "n_comps": 30,
                "batch_key": "batch_id",
                "raw_data_path": "${geomx_cohort_analysis_raw_data_path}",
                "workflow_info": "${geomx_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "merged_adata_object": {
                  "value": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.merged.h5ad",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                },
                "merged_adata_metadata_csv": {
                  "value": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.merged_adata_metadata.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "all_genes_csv": {
                  "value": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.all_genes.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "hvg_genes_csv": {
                  "value": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.hvg_genes.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "hvg_plot_png": {
                  "value": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.hvg_dispersion.png",
                  "test_tasks": [
                    "compare_file_basename",
                    "png_validator",
                    "image_validator"
                  ]
                }
              }
            }
          ]
        }
      }
    },
    "workflows/pmdbs_spatial_geomx/preprocess/preprocess.wdl": {
      "key": "workflows/pmdbs_spatial_geomx/preprocess/preprocess.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "fastq_to_dcc": {
          "key": "fastq_to_dcc",
          "digest": "zj5w4vfxuwy4nz4s5inmeq6jup3ml5v3",
          "tests": [
            {
              "inputs": {
                "slide_id": "${geomx_slide_id}",
                "fastq_R1s": [
                  "gs://asap-raw-team-edwards-pmdbs-spatial-geomx-th/fastqs/DSP_1001660018649_A_A02_S2_L001_R1_001.fastq.gz",
                  "gs://asap-raw-team-edwards-pmdbs-spatial-geomx-th/fastqs/DSP_1001660018649_A_A02_S2_L002_R1_001.fastq.gz"
                ],
                "fastq_R2s": [
                  "gs://asap-raw-team-edwards-pmdbs-spatial-geomx-th/fastqs/DSP_1001660018649_A_A02_S2_L001_R2_001.fastq.gz",
                  "gs://asap-raw-team-edwards-pmdbs-spatial-geomx-th/fastqs/DSP_1001660018649_A_A02_S2_L002_R2_001.fastq.gz"
                ],
                "geomx_config_ini": "gs://asap-raw-team-edwards-pmdbs-spatial-geomx-th/spatial/config_files/11FEB2025_HWTA_DNAstack_merged_config.ini",
                "raw_data_path": "${fastq_to_dcc_raw_data_path}",
                "workflow_info": "${geomx_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "geomxngs_dcc_zip": {
                  "value": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.DCC.zip",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_zip"
                  ]
                },
                "geomxngs_output_tar_gz": {
                  "value": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.geomxngs_out_dir.tar.gz",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_gzip"
                  ]
                }
              }
            }
          ]
        },
        "dcc_to_rds": {
          "key": "dcc_to_rds",
          "digest": "qcfvjcqoup3damuk2elqrt7dhrefknds",
          "tests": [
            {
              "inputs": {
                "team_id": "${geomx_team_id}",
                "dataset_id": "${geomx_dataset_id}",
                "slide_id": "${geomx_slide_id}",
                "project_sample_metadata_csv": "gs://asap-raw-team-edwards-pmdbs-spatial-geomx-th/metadata/release/SAMPLE.csv",
                "geomxngs_dcc_zip": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.DCC.zip",
                "geomx_lab_annotation_xlsx": "gs://asap-raw-team-edwards-pmdbs-spatial-geomx-th/spatial/annotation_files/cleaned_DNAstack_GeoMx_round_1_YH_20230719T2320_LabWorksheet.xlsx",
                "geomxngs_config_pkc": "${input_resources_file_path}/Hs_R_NGS_WTA_v1.0.pkc",
                "raw_data_path": "${dcc_to_rds_raw_data_path}",
                "workflow_info": "${geomx_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "initial_rds_object": {
                  "value": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.NanoStringGeoMxSet.rds",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_rds"
                  ]
                }
              }
            }
          ]
        },
        "qc": {
          "key": "qc",
          "digest": "vc72sxvdhbvf5yttwe7iiwk6jvend2uq",
          "tests": [
            {
              "inputs": {
                "slide_id": "${geomx_slide_id}",
                "initial_rds_object": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.NanoStringGeoMxSet.rds",
                "min_segment_reads": 1000,
                "min_percent_reads_trimmed": 80,
                "min_percent_reads_stitched": 80,
                "min_percent_reads_aligned": 80,
                "min_saturation": 50,
                "min_neg_ctrl_count": 1,
                "max_ntc_count": 1000,
                "min_nuclei": 100,
                "min_segment_area": 5000,
                "raw_data_path": "${geomx_qc_raw_data_path}",
                "workflow_info": "${geomx_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "qc_rds_object": {
                  "value": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.qc.rds",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_rds"
                  ]
                },
                "segment_qc_summary_csv": {
                  "value": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.segment_qc_summary.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "probe_qc_summary_csv": {
                  "value": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.probe_qc_summary.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "gene_count_csv": {
                  "value": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.gene_count.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                }
              }
            }
          ]
        },
        "check_output_files_exist": {
          "key": "check_output_files_exist",
          "digest": "bffhkxzxjypfmn6e5q67wxqe24dn6sdt",
          "tests": []
        }
      }
    },
    "workflows/integrate_data/integrate_data.wdl": {
      "key": "workflows/integrate_data/integrate_data.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "integrate_sample_data": {
          "key": "integrate_sample_data",
          "digest": "rcbwbwgpehbd4bez5gbwzmofudi22up6",
          "tests": [
            {
              "inputs": {
                "cohort_id": "${geomx_team_id}",
                "merged_and_processed_adata_object": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.merged.h5ad",
                "batch_key": "batch_id",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "integrated_adata_object": {
                  "value": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.harmony_integrated.h5ad",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                }
              }
            }
          ]
        },
        "cluster": {
          "key": "cluster",
          "digest": "chquhvgfycakclmctuyqjyeanrbtlilo",
          "tests": [
            {
              "inputs": {
                "cohort_id": "${geomx_team_id}",
                "integrated_adata_object": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.harmony_integrated.h5ad",
                "n_comps": 30,
                "leiden_resolution": "0.4",
                "raw_data_path": "${geomx_cohort_analysis_raw_data_path}",
                "workflow_info": "${geomx_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "clustered_adata_object": {
                  "value": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.clustered.h5ad",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                },
                "umap_cluster_plots_png": {
                  "value": "${geomx_input_file_path}/${cohort_analysis_workflow_name}/${geomx_team_id}.umap_cluster.png",
                  "test_tasks": [
                    "compare_file_basename",
                    "png_validator",
                    "image_validator"
                  ]
                }
              }
            }
          ]
        }
      }
    },
    "workflows/pmdbs_spatial_visium/cohort_analysis/cohort_analysis.wdl": {
      "key": "workflows/pmdbs_spatial_visium/cohort_analysis/cohort_analysis.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "merge_and_plot_qc_metrics": {
          "key": "merge_and_plot_qc_metrics",
          "digest": "w5637hnyv47nzalkr72puv7cixhgx5pu",
          "tests": [
            {
              "inputs": {
                "cohort_id": "${visium_team_id}",
                "preprocessed_adata_objects": [
                  "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.qc.h5ad",
                  "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id_2}.qc.h5ad"
                ],
                "raw_data_path": "${visium_cohort_analysis_raw_data_path}",
                "workflow_info": "${visium_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "merged_adata_object": {
                  "value": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.merged.h5ad",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                },
                "qc_plots_png": {
                  "value": [
                    "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.qc_violin.png",
                    "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.qc_dist.png"
                  ],
                  "test_tasks": [
                    "compare_file_basename",
                    "png_validator",
                    "image_validator"
                  ]
                }
              }
            }
          ]
        },
        "filter_and_normalize": {
          "key": "filter_and_normalize",
          "digest": "hrix2jd7skzunlvqtbddvosxosslqlac",
          "tests": [
            {
              "inputs": {
                "cohort_id": "${visium_team_id}",
                "merged_adata_object": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.merged.h5ad",
                "filter_cells_min_counts": 5000,
                "filter_cells_min_genes": 3000,
                "filter_genes_min_cells": 10,
                "filter_mt_max_percent": "0.2",
                "normalize_target_sum": 10000,
                "n_top_genes": 3000,
                "n_comps": 30,
                "batch_key": "batch_id",
                "raw_data_path": "${visium_cohort_analysis_raw_data_path}",
                "workflow_info": "${visium_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "processed_adata_object": {
                  "value": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.processed.h5ad",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                },
                "all_genes_csv": {
                  "value": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.all_genes.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "hvg_genes_csv": {
                  "value": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.hvg_genes.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "hvg_plot_png": {
                  "value": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.hvg_dispersion.png",
                  "test_tasks": [
                    "compare_file_basename",
                    "png_validator",
                    "image_validator"
                  ]
                }
              }
            }
          ]
        },
        "plot_spatial": {
          "key": "plot_spatial",
          "digest": "mra4pyglrzr5eym4pht6d3e5dtxhks7a",
          "tests": [
            {
              "inputs": {
                "cohort_id": "${visium_team_id}",
                "clustered_adata_object": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.clustered.h5ad",
                "raw_data_path": "${visium_cohort_analysis_raw_data_path}",
                "workflow_info": "${visium_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "spatial_scatter_plot_png": {
                  "value": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.spatial_scatter.png",
                  "test_tasks": [
                    "compare_file_basename",
                    "png_validator",
                    "image_validator"
                  ]
                }
              }
            }
          ]
        }
      }
    },
    "workflows/pmdbs_spatial_visium/cohort_analysis/spatial_statistics/spatial_statistics.wdl": {
      "key": "workflows/pmdbs_spatial_visium/cohort_analysis/spatial_statistics/spatial_statistics.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "spatially_variable_gene_analysis": {
          "key": "spatially_variable_gene_analysis",
          "digest": "pbh5hevnohvtahgqfegk32kwzqefn7xo",
          "tests": [
            {
              "inputs": {
                "cohort_id": "${visium_team_id}",
                "clustered_adata_object": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.clustered.h5ad",
                "raw_data_path": "${visium_cohort_analysis_raw_data_path}",
                "workflow_info": "${visium_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "final_adata_object": {
                  "value": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.final.h5ad",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                },
                "moran_top_10_variable_genes_csv": {
                  "value": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.moran_top_10_variable_genes.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "moran_top_4_variable_genes_spatial_scatter_plot_png": {
                  "value": "${visium_input_file_path}/${cohort_analysis_workflow_name}/${visium_team_id}.moran_top_4_variable_genes_spatial_scatter.png",
                  "test_tasks": [
                    "compare_file_basename",
                    "png_validator",
                    "image_validator"
                  ]
                }
              }
            }
          ]
        }
      }
    },
    "workflows/pmdbs_spatial_visium/preprocess/preprocess.wdl": {
      "key": "workflows/pmdbs_spatial_visium/preprocess/preprocess.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "spaceranger_count": {
          "key": "spaceranger_count",
          "digest": "u5qwsbzibn5jfeyr5jelgd6kxzcydo2o",
          "tests": [
            {
              "inputs": {
                "sample_id": "${visium_sample_id}",
                "fastq_R1s": [
                  "gs://asap-wdl-ci/subset_fastqs/team-vila/subset_10000_6OHDA_ST.20220719.run2.V11D08-305_A1_S1_R1_001.fastq.gz"
                ],
                "fastq_R2s": [
                  "gs://asap-wdl-ci/subset_fastqs/team-vila/subset_10000_6OHDA_ST.20220719.run2.V11D08-305_A1_S1_R2_001.fastq.gz"
                ],
                "fastq_I1s": [],
                "fastq_I2s": [],
                "visium_brightfield_image": "gs://asap-raw-team-cragg-mouse-spatial-visium-striatum/spatial/images/220505-sf-ParkinsonProject_V11D08-305_A1-Spot000003.jpg",
                "visium_slide_serial_number": "V11D08-305",
                "visium_capture_area": "A1",
                "spaceranger_reference_data": "${input_resources_file_path}/refdata-gex-mm10-2020-A.tar.gz",
                "raw_data_path": "${spaceranger_count_raw_data_path}",
                "workflow_info": "${visium_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "raw_counts": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.raw_feature_bc_matrix.h5",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                },
                "filtered_counts": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.filtered_feature_bc_matrix.h5",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                },
                "molecule_info": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.molecule_info.h5",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                },
                "metrics_summary_csv": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.metrics_summary.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "spatial_outputs_tar_gz": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.spaceranger_spatial_outputs.tar.gz",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_gzip"
                  ]
                },
                "spatial_images": {
                  "value": [
                    "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.aligned_fiducials.jpg",
                    "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.detected_tissue_image.jpg",
                    "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.tissue_hires_image.png",
                    "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.tissue_lowres_image.png"
                  ],
                  "test_tasks": [
                    "compare_file_basename",
                    "image_validator"
                  ]
                },
                "scalefactors_json": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.scalefactors_json.json",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_json"
                  ]
                },
                "tissue_positions_csv": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.tissue_positions.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "spatial_enrichment_csv": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.spatial_enrichment.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                }
              }
            }
          ]
        },
        "counts_to_adata": {
          "key": "counts_to_adata",
          "digest": "itpk7kn2vwno4o5bthjsetdmk6bvq2cb",
          "tests": [
            {
              "inputs": {
                "team_id": "${visium_team_id}",
                "dataset_id": "${visium_dataset_id}",
                "sample_id": "${visium_sample_id}",
                "batch": "1",
                "visium_slide_serial_number": "V11D08-305",
                "visium_capture_area": "A1",
                "spaceranger_spatial_tar_gz": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.spaceranger_spatial_outputs.tar.gz",
                "raw_data_path": "${counts_to_adata_raw_data_path}",
                "workflow_info": "${visium_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "initial_adata_object": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.initial.h5ad",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                }
              }
            }
          ]
        },
        "qc": {
          "key": "qc",
          "digest": "5fkcmlo3542jluxz73qg376vhtbfsv3b",
          "tests": [
            {
              "inputs": {
                "sample_id": "${visium_sample_id}",
                "initial_adata_object": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.initial.h5ad",
                "raw_data_path": "${visium_qc_raw_data_path}",
                "workflow_info": "${visium_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "qc_adata_object": {
                  "value": "${visium_input_file_path}/${preprocess_workflow_name}/${visium_sample_id}.qc.h5ad",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_hdf5"
                  ]
                }
              }
            }
          ]
        },
        "check_output_files_exist": {
          "key": "check_output_files_exist",
          "digest": "46hnnizzjx7ltyqbop6vpc5r5ygele3u",
          "tests": []
        }
      }
    },
    "wf-common/wdl/structs.wdl": {
      "key": "wf-common/wdl/structs.wdl",
      "name": "",
      "description": "",
      "tasks": {}
    },
    "wf-common/wdl/tasks/upload_final_outputs.wdl": {
      "key": "wf-common/wdl/tasks/upload_final_outputs.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "upload_final_outputs": {
          "key": "upload_final_outputs",
          "digest": "6zwff2jkc2rhcuey74wxstmob4bduczy",
          "tests": []
        }
      }
    },
    "wf-common/wdl/tasks/write_cohort_sample_list.wdl": {
      "key": "wf-common/wdl/tasks/write_cohort_sample_list.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "write_cohort_sample_list": {
          "key": "write_cohort_sample_list",
          "digest": "cn33tbof6zcgr72pzjgzqplvbtzg47bk",
          "tests": []
        }
      }
    },
    "wf-common/wdl/tasks/multiqc.wdl": {
      "key": "wf-common/wdl/tasks/multiqc.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "multiqc": {
          "key": "multiqc",
          "digest": "4t2scgtx77z3trxdxi7rdodw2e3ywki2",
          "tests": []
        }
      }
    },
    "wf-common/wdl/tasks/fastqc.wdl": {
      "key": "wf-common/wdl/tasks/fastqc.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "fastqc": {
          "key": "fastqc",
          "digest": "bhllguwdae3ynfe7nbgxn7ihq4qjec3d",
          "tests": []
        }
      }
    },
    "wf-common/wdl/tasks/get_workflow_metadata.wdl": {
      "key": "wf-common/wdl/tasks/get_workflow_metadata.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "get_workflow_metadata": {
          "key": "get_workflow_metadata",
          "digest": "xlrigezj3ohrqa2s5xe4n2obfplscjm3",
          "tests": []
        }
      }
    },
    "workflows/pmdbs_spatial_geomx/structs.wdl": {
      "key": "workflows/pmdbs_spatial_geomx/structs.wdl",
      "name": "",
      "description": "",
      "tasks": {}
    },
    "workflows/pmdbs_spatial_geomx/main.wdl": {
      "key": "workflows/pmdbs_spatial_geomx/main.wdl",
      "name": "",
      "description": "",
      "tasks": {}
    },
    "workflows/pmdbs_spatial_visium/structs.wdl": {
      "key": "workflows/pmdbs_spatial_visium/structs.wdl",
      "name": "",
      "description": "",
      "tasks": {}
    },
    "workflows/pmdbs_spatial_visium/main.wdl": {
      "key": "workflows/pmdbs_spatial_visium/main.wdl",
      "name": "",
      "description": "",
      "tasks": {}
    },
    "pmdbs-spatial-transcriptomics-wdl-ci-custom-test-dir/check_zip.wdl": {
      "key": "pmdbs-spatial-transcriptomics-wdl-ci-custom-test-dir/check_zip.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "check_zip": {
          "key": "check_zip",
          "digest": "57rodepomoc477nwma6pqc3vpf7rbpgy",
          "tests": []
        }
      }
    },
    "pmdbs-spatial-transcriptomics-wdl-ci-custom-test-dir/image_validator.wdl": {
      "key": "pmdbs-spatial-transcriptomics-wdl-ci-custom-test-dir/image_validator.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "image_validator": {
          "key": "image_validator",
          "digest": "gnolkzxnd3l7eee7rr3eurqdnvfpggq7",
          "tests": []
        }
      }
    },
    "workflows/pmdbs_spatial_geomx/process_to_adata/process_to_adata.wdl": {
      "key": "workflows/pmdbs_spatial_geomx/process_to_adata/process_to_adata.wdl",
      "name": "",
      "description": "",
      "tasks": {
        "filter_and_normalize": {
          "key": "filter_and_normalize",
          "digest": "3aorzvkdrznalhtf4arsxwmurayzkuyp",
          "tests": [
            {
              "inputs": {
                "preprocessed_rds_object": "${geomx_input_file_path}/${preprocess_workflow_name}/${geomx_slide_id}.qc.rds",
                "cell_type_markers_list": "${input_resources_file_path}/celltype_marker_table.csv",
                "min_genes_detected_in_percent_segment": 0.01,
                "raw_data_path": "${geomx_process_to_adata_raw_data_path}",
                "workflow_info": "${geomx_workflow_info}",
                "billing_project": "${billing_project}",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "processed_rds_object": {
                  "value": "${geomx_input_file_path}/${process_to_adata_workflow_name}/${geomx_slide_id}.processed.rds",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_rds"
                  ]
                },
                "segment_gene_detection_plot_png": {
                  "value": "${geomx_input_file_path}/${process_to_adata_workflow_name}/${geomx_slide_id}.segment_gene_detection_plot.png",
                  "test_tasks": [
                    "compare_file_basename",
                    "png_validator",
                    "image_validator"
                  ]
                },
                "gene_detection_rate_csv": {
                  "value": "${geomx_input_file_path}/${process_to_adata_workflow_name}/${geomx_slide_id}.gene_detection_rate.csv",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_empty_lines",
                    "check_comma_separated",
                    "count_columns"
                  ]
                },
                "q3_negprobe_plot_png": {
                  "value": "${geomx_input_file_path}/${process_to_adata_workflow_name}/${geomx_slide_id}.q3_negprobe_plot.png",
                  "test_tasks": [
                    "compare_file_basename",
                    "png_validator",
                    "image_validator"
                  ]
                },
                "normalization_plot_png": {
                  "value": "${geomx_input_file_path}/${process_to_adata_workflow_name}/${geomx_slide_id}.normalization_plot.png",
                  "test_tasks": [
                    "compare_file_basename",
                    "png_validator",
                    "image_validator"
                  ]
                }
              }
            }
          ]
        },
        "rds_to_adata": {
          "key": "rds_to_adata",
          "digest": "2wxyiftqdrsemi7mtgomssz4iytrwo2x",
          "tests": [
            {
              "inputs": {
                "processed_rds_object": "${geomx_input_file_path}/${process_to_adata_workflow_name}/${geomx_slide_id}.processed.rds",
                "container_registry": "${container_registry}",
                "zones": "${zones}"
              },
              "output_tests": {
                "processed_adata_object": {
                  "value": "${geomx_input_file_path}/${process_to_adata_workflow_name}/${geomx_slide_id}.processed.h5ad",
                  "test_tasks": [
                    "compare_file_basename",
                    "check_rds"
                  ]
                }
              }
            }
          ]
        }
      }
    }
  },
  "engines": {
    "asap-cromwell": {
      "key": "asap-cromwell",
      "enabled": true,
      "name": ""
    }
  },
  "test_params": {
    "global_params": {
      "geomx_team_id": "team-edwards",
      "geomx_dataset_id": "DS_PMDBS_0013",
      "geomx_slide_id": "ASAP_DS_PMDBS_0013_SLIDE_0001_BATCH_1",
      "geomx_slide_id_2": "ASAP_DS_PMDBS_0013_SLIDE_0001_BATCH_2",
      "cohort_id": "asap-cohort",
      "geomx_workflow_name": "pmdbs_spatial_geomx",
      "geomx_workflow_version": "v1.0.0",
      "geomx_workflow_release": "https://github.com/ASAP-CRN/pmdbs-spatial-transcriptomics-wf/releases/tag/pmdbs_spatial_geomx_analysis-${visium_workflow_version}",
      "geomx_workflow_info": [
        [
          "${run_timestamp}",
          "${geomx_workflow_name}",
          "${geomx_workflow_version}",
          "${geomx_workflow_release}"
        ]
      ],
      "preprocess_workflow_name": "preprocess",
      "fastq_to_dcc_task_version": "1.0.0",
      "dcc_to_rds_task_version": "1.0.0",
      "geomx_qc_task_version": "1.0.0",
      "fastq_to_dcc_raw_data_path": "gs://asap-wdl-ci/workflow_execution/${geomx_workflow_name}/${preprocess_workflow_name}/fastq_to_dcc/${fastq_to_dcc_task_version}",
      "dcc_to_rds_raw_data_path": "gs://asap-wdl-ci/workflow_execution/${geomx_workflow_name}/${preprocess_workflow_name}/dcc_to_rds/${dcc_to_rds_task_version}",
      "geomx_qc_raw_data_path": "gs://asap-wdl-ci/workflow_execution/${geomx_workflow_name}/${preprocess_workflow_name}/qc/${geomx_qc_task_version}",
      "process_to_adata_workflow_name": "process_to_adata",
      "geomx_process_to_adata_workflow_version": "1.0.0",
      "geomx_process_to_adata_raw_data_path": "gs://asap-wdl-ci/workflow_execution/${geomx_workflow_name}/${process_to_adata_workflow_name}/${geomx_process_to_adata_workflow_version}/${run_timestamp}",
      "cohort_analysis_workflow_name": "cohort_analysis",
      "geomx_cohort_analysis_workflow_version": "1.0.0",
      "geomx_cohort_analysis_raw_data_path": "gs://asap-wdl-ci/workflow_execution/${geomx_workflow_name}/${cohort_analysis_workflow_name}/${geomx_cohort_analysis_workflow_version}/${run_timestamp}",
      "visium_team_id": "team-cragg",
      "visium_dataset_id": "DS_MOUSE_0014",
      "visium_sample_id": "ASAP_MOUSE_000001_s001_Rep2",
      "visium_sample_id_2": "ASAP_MOUSE_000002_s001_Rep1",
      "visium_workflow_name": "pmdbs_spatial_visium",
      "visium_workflow_version": "v1.0.0",
      "visium_workflow_release": "https://github.com/ASAP-CRN/pmdbs-spatial-transcriptomics-wf/releases/tag/pmdbs_spatial_visium_analysis-${visium_workflow_version}",
      "visium_workflow_info": [
        [
          "${run_timestamp}",
          "${visium_workflow_name}",
          "${visium_workflow_version}",
          "${visium_workflow_release}"
        ]
      ],
      "spaceranger_count_task_version": "1.0.0",
      "counts_to_adata_task_version": "1.0.0",
      "visium_qc_task_version": "1.0.0",
      "spaceranger_count_raw_data_path": "gs://asap-wdl-ci/workflow_execution/${visium_workflow_name}/${preprocess_workflow_name}/spaceranger_count/${spaceranger_count_task_version}",
      "counts_to_adata_raw_data_path": "gs://asap-wdl-ci/workflow_execution/${visium_workflow_name}/${preprocess_workflow_name}/counts_to_adata/${counts_to_adata_task_version}",
      "visium_qc_raw_data_path": "gs://asap-wdl-ci/workflow_execution/${visium_workflow_name}/${preprocess_workflow_name}/qc/${visium_qc_task_version}",
      "visium_cohort_analysis_workflow_version": "1.0.0",
      "visium_cohort_analysis_raw_data_path": "gs://asap-wdl-ci/workflow_execution/${visium_workflow_name}/${cohort_analysis_workflow_name}/${visium_cohort_analysis_workflow_version}/${run_timestamp}",
      "run_timestamp": "2025-03-25T00-00-00Z",
      "billing_project": "dnastack-asap-parkinsons",
      "container_registry": "us-central1-docker.pkg.dev/dnastack-asap-parkinsons/workflow-images",
      "zones": "us-central1-c us-central1-f"
    },
    "engine_params": {
      "asap-cromwell": {
        "input_resources_file_path": "gs://asap-workflow-dev/workflow-resources",
        "geomx_input_file_path": "gs://asap-wdl-ci/pmdbs_spatial_geomx",
        "visium_input_file_path": "gs://asap-wdl-ci/pmdbs_spatial_visium"
      }
    }
  }
}